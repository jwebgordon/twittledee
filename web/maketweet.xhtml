<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
    <head>
        <title>Compose a tweet</title>
        <link type="text/css" rel="stylesheet" href="hubstyle.css" />
        <link type="text/css" rel="stylesheet" href="fancybox/jquery.fancybox.css" />
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript" src="fancybox/jquery.fancybox.js" />
        <script type="text/javascript" src="fancybox/jquery.fancybox.pack.js" />

        <link rel="stylesheet" href="fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />
        <script type="text/javascript" src="fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
        <script type="text/javascript" src="fancybox/helpers/jquery.fancybox-media.js?v=1.0.0"></script>

        <link rel="stylesheet" href="fancybox/helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />
        <script type="text/javascript" src="fancybox/helpers/jquery.fancybox-thumbs.js?v=2.0.6"></script>

        <script type="text/javascript">
            $(document).ready(function() {
                $("a.fancybox-iframe").fancybox();
            });
        </script>

        <!--
                <script type="text/javascript" >
                    $(document).ready(function() {
                        initListener();
                        addListener();
                    });
                                
                    function initListener(){
                        alert('initListener called');
                        $('#j_idt3\\:tweetbutton').attr('title', 'hello');
                        $('#j_idt3\\:tweetbutton').click(function(){
                            
                            alert('listener added!');
                            addlistener();
                           
                        });
                    }
                    
                    function addListener(){
                        alert('addListener called');
                        $('#close-bookmarklet').click(function(){
                            $('#hubspot_publish_iframe').attr('hidden', true);
                        });
                        
                        $('#close-bookmarklet').attr('title', 'hello');
                        
                        $("#hubspot_publish_iframe").contents().find("#close-bookmarklet").click(function(){
                            alert('this worked!');
                            
                        }
                    );
                    }
                </script>-->
    </head>
    <body>
        
        <h:form>
            <table class="hs-table" style="width: 300px;">
                <tr>
                    <td style="width: 30%">
                        <label class="hs-input label">Tweet</label>
                    </td>
                    <td>
                        <h:inputTextarea value="#{ModelBean.tweet}" class="textarea.hs-input #{ModelBean.tweetClass}" style="width:200px;" onkeyup="" onchange="jQuery('#j_idt3\\:invisButton').click();" >
                            <f:facet name="label">
                                Tweet
                            </f:facet>
                        </h:inputTextarea>
                        
                    </td>
                    <td>
                        <div class="progress #{ModelBean.progressClass}" style="width:100px">
                            <div class="bar" style="width: #{ModelBean.sliderVal}%;" ></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h:commandButton value="Analyze Tweet" class="hs-button orange" action="#{ModelBean.tweetAnalysis()}" />
                    </td>
                    <td>
                        
                            <!--<h:commandButton value="Tweet it!" class="hs-button primary fancybox-iframe" id="tweetbutton" action="http://www.google.com"   />-->
                        <a href="https://app.hubspot.com/social/#{ModelBean.hubID}/publishing/compose_bookmarklet?body=#{ModelBean.ending}" class="hs-button primary fancybox-iframe" data-fancybox-type="iframe"  >
                            Tweet it!
                        </a>
                            <h:commandButton action="#{ModelBean.updateEnding()}" style="display:none;" id="invisButton" />
                    </td>
                </tr>

                <h:outputText value="Post Successful" rendered="#{ModelBean.commentSuccess}" />
                <h:outputText value="Post Failed" rendered="#{ModelBean.commentFailure}" />
            </table>
        </h:form>
        <!--<iframe src="#{ModelBean.iframeURL}" id="hubspot_publish_iframe" style="position: fixed; left: 0px; top: 0px; z-index: 100000;height: 100%;width: 100%;border: none; display: #{ModelBean.iframeClass} " hidden="#{ModelBean.iframeHidden}" class="#{ModelBean.iframeClass}" allowtransparency="true"   />-->
        <ul class="hs-help-nav">
            <li>
                <a href="twitpage.xhtml" class="hs-help-button">Back to all tweets</a>
            </li>
        </ul>
    </body>
</html>
